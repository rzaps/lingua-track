"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Telegram –±–æ—Ç–∞
"""

import os
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env
load_dotenv()

class Config:
    """–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞"""
    
    # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    BOT_TOKEN = os.getenv('BOT_TOKEN')
    BOT_USERNAME = os.getenv('BOT_USERNAME', 'Lingua_Track_Bot')
    DEBUG = os.getenv('DEBUG', 'True').lower() == 'true'
    
    # URL —Å–∞–π—Ç–∞ –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
    SITE_URL = os.getenv('SITE_URL', 'http://127.0.0.1:8000')
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–æ–≤
    TEST_QUESTIONS_COUNT = 5  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ —Ç–µ—Å—Ç–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
    REMINDER_HOUR = 9  # –ß–∞—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (UTC)
    REMINDER_MINUTE = 0  # –ú–∏–Ω—É—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

    # –°–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞
    MESSAGES = {
        "welcome": "üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ LinguaTrack Bot!\n\n–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—é –∏–ª–∏ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —Å–ª–æ–≤.",
        "help": "‚ÑπÔ∏è –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n/today ‚Äî —Å–ª–æ–≤–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è\n/progress ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞\n/cards ‚Äî –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏\n/test ‚Äî –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç\n/remind ‚Äî —Ç–µ—Å—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π\n/feedback ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤\n\n–î–ª—è —Å–≤—è–∑–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ /link",
        "no_reviews_today": "–°–µ–≥–æ–¥–Ω—è –Ω–µ—Ç —Å–ª–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏!",
        "not_registered": "‚ùóÔ∏è –í—ã –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –°–Ω–∞—á–∞–ª–∞ —Å–≤—è–∂–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç —á–µ—Ä–µ–∑ /link.",
        "no_cards": "–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∫–∞—Ä—Ç–æ—á–µ–∫. –î–æ–±–∞–≤—å—Ç–µ –∏—Ö –Ω–∞ —Å–∞–π—Ç–µ –∏–ª–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞.",
        # --- –°–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤ ---
        "test_start": "üìù –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç! –í–æ–ø—Ä–æ—Å–æ–≤: {count}.\n–ù–∞–∂–º–∏—Ç–µ '‚úÖ –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç', —á—Ç–æ–±—ã –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å.",
        "test_complete": "‚úÖ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à—ë–Ω!\n–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: {correct}/{total}\n–¢–æ—á–Ω–æ—Å—Ç—å: {accuracy}%\n{message}",
    }

    # –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Ü–µ–Ω–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ç–µ—Å—Ç–∞
    TEST_MESSAGES = {
        "excellent": "üéâ –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å!",
        "good": "üëç –•–æ—Ä–æ—à–æ! –ï—â—ë –Ω–µ–º–Ω–æ–≥–æ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ –±—É–¥–µ—Ç –æ—Ç–ª–∏—á–Ω–æ.",
        "satisfactory": "üôÇ –ù–µ–ø–ª–æ—Ö–æ. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏.",
        "poor": "üß† –ï—Å—Ç—å –Ω–∞–¥ —á–µ–º –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Å–ª–æ–≤–∞ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.",
    }

    # URL –¥–ª—è QR-–∫–æ–¥–∞
    @classmethod
    def get_bot_url(cls):
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –±–æ—Ç—É"""
        return f"https://t.me/{cls.BOT_USERNAME}"
    
    @classmethod
    def get_qr_url(cls):
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–∞"""
        bot_url = cls.get_bot_url()
        return f"https://api.qrserver.com/v1/create-qr-code/?size=200x200&data={bot_url}" 