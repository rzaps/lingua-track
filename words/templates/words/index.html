{% extends "base.html" %}
{% block content %}
<h1>–ú–æ–∏ —Å–ª–æ–≤–∞</h1>

<form method="get" class="mb-3">
  <select name="level" class="form-select">
    <option value="">–í—Å–µ —É—Ä–æ–≤–Ω–∏</option>
    <option value="beginner" {% if level == 'beginner' %}selected{% endif %}>–ù–∞—á–∞–ª—å–Ω—ã–π</option>
    <option value="intermediate" {% if level == 'intermediate' %}selected{% endif %}>–°—Ä–µ–¥–Ω–∏–π</option>
    <option value="advanced" {% if level == 'advanced' %}selected{% endif %}>–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
  </select>

  <input type="text" name="search" placeholder="–ü–æ–∏—Å–∫ —Å–ª–æ–≤–∞" value="{{ search|default:'' }}" class="form-control mt-2"/>

  <button type="submit" class="btn btn-primary mt-2">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
</form>

<a href="{% url 'words:index' %}" class="btn btn-outline-primary">–°–ø–∏—Å–æ–∫ —Å–ª–æ–≤</a>
<a href="{% url 'words:card_mode' %}" class="btn btn-primary">–ö–∞—Ä—Ç–æ—á–Ω—ã–π —Ä–µ–∂–∏–º</a>
<a href="{% url 'quiz:choose_test' %}" class="btn btn-success">–¢–µ—Å—Ç</a>


<a href="{% url 'words:add_card' %}" class="btn btn-primary mb-3">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —Å–ª–æ–≤–æ</a>

{% if cards %}
    <ul class="list-group">
    {% for card in cards %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
                <strong>{{ card.word }}</strong> ‚Äî {{ card.translation }} ({{ card.get_level_display }})
                <button class="btn btn-outline-secondary btn-sm ms-2" onclick="playTTS('{{ card.word|urlencode }}')">üîä</button>
            </div>
            <div>
                <a href="{% url 'words:card_detail' card.pk %}" class="btn btn-sm btn-info">–ü—Ä–æ—Å–º–æ—Ç—Ä</a>
                <a href="{% url 'words:edit_card' card.pk %}" class="btn btn-sm btn-warning">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <a href="{% url 'words:delete_card' card.pk %}" class="btn btn-sm btn-danger">–£–¥–∞–ª–∏—Ç—å</a>
            </div>
        </li>
    {% endfor %}
    </ul>
    <audio id="tts-audio" src="" style="display:none;"></audio>
    <script>
      function playTTS(word) {
        const audio = document.getElementById('tts-audio');
        audio.src = '/tts/' + word + '/';
        audio.style.display = 'block';
        audio.play();
      }
    </script>
{% else %}
    <p>–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤.</p>
{% endif %}

{% endblock %}
